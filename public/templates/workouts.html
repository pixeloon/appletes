<div layout="column" flex>
    <!-- <nav> -->
    <md-toolbar class="fixed-nav">
        <md-whiteframe class="md-whiteframe-5dp">
            <div class="md-toolbar-tools">
                <md-button ng-click='ctrl.openLeftNav()' aria-label="Settings">
                    <md-icon class="mdi mdi-menu"></md-icon>
                </md-button>
                <span flex></span>
                <p><strong>Appletes</strong></p><span flex></span>
                <md-button ng-click='ctrl.view.filterWorkouts = !ctrl.view.filterWorkouts' aria-label="Filter">
                    <md-icon class="mdi mdi-magnify"></md-icon>
                </md-button>
                <md-button ng-click="ctrl.setWorkoutId(); ctrl.openRightNav()">
                    <md-icon class="mdi mdi-shape-circle-plus"></md-icon>Add Workout</md-button>
            </div>
        </md-whiteframe>
    </md-toolbar>
    <!-- // sub menu -->
    <md-toolbar class="fixed-nav" ng-show="ctrl.view.filterWorkouts">
        <md-whiteframe class="md-whiteframe-5dp">
            <div class="md-toolbar-tools">
                <span flex></span>
                <form>
                    <md-input-container style="margin-top: 45px">
                        <label for="filter">Apply Filter</label>
                        <input ng-model="ctrl.view.filteredWorkouts" type="text" aria-label="Filter Input" style="color:white;font-size: 1em;" md-autofocus>
                    </md-input-container>
                    <md-input-container>
                        <label>Sort:</label>
                        <input>
                        <span flex></span>
                        <md-button class="md-icon-button" ng-click="ctrl.view.filteredWorkouts = ''">
                            <md-icon class="mdi mdi-format-clear" aria-label="Clear Filter"></md-icon>
                        </md-button>
                        <md-button class="md-icon-button" ng-click="ctrl.view.filterWorkouts = false">
                            <md-icon class="mdi mdi-close" aria-label="Close Filter"></md-icon>
                        </md-button>
                </form>
            </div>
        </md-whiteframe>
    </md-toolbar>
    <!-- SIDENAV LEFT-->
    <md-sidenav class="md-sidenav-left md-whiteframe-4dp" md-component-id="left">
        <md-toolbar class="md-theme-light" layout="row">
            <h1 class="md-toolbar-tools">Settings</h1>
            <span flex></span>
            <md-button class="md-icon-button" ng-click="ctrl.closeLeftNav()">
                <md-icon md-icon class="mdi mdi-close" aria-label="Close Nav"></md-icon>
            </md-button>
        </md-toolbar>
        <div layout="column" class="md-inline-form">
            <md-content layout-padding>
                <div>
                    <img class="user-avatar" ng-src="{{ctrl.view.photoUrl}}"> {{ctrl.view.contributor}}
                    <md-button class="md-warn" ng-click="ctrl.signOutUser();ctrl.closeLeftNav()">Log out</md-button>
                    <md-divider></md-divider>
                </div>
                <div>
                    <md-switch ng-model="ctrl.view.showComments" class="md-primary" md-no-ink aria-label="Switch Comments">
                        Show all comments: {{ ctrl.view.showComments}}
                    </md-switch>
                    <md-switch ng-model="ctrl.view.showImages" class="md-primary" md-no-ink aria-label="Switch Images">
                        Show all images: {{ ctrl.view.showImages }}
                    </md-switch>
                </div>
            </md-content>
        </div>
    </md-sidenav>
    <!-- // END LEFT SIDENAV -->
    <!-- SIDENAV RIGHT-->
    <md-sidenav class="md-sidenav-right md-whiteframe-4dp" md-component-id="right">
        <md-toolbar>
            <h1 class="md-toolbar-tools">Add Workout</h1>
        </md-toolbar>
        <div layout="column" class="md-inline-form">
            <md-content layout-padding>
                <div>
                    <form name="workoutForm">
                        <md-input-container>
                            <label for="title">Name your Workout</label>
                            <input ng-model="ctrl.view.workout.title" type="text" md-autofocus>
                        </md-input-container>
                        <!-- // add exercises -->
                        <md-button class="md-primary" aria-label="Add" ng-click="ctrl.showExerciseDialog($event)">
                            <ng-md-icon icon="add">Add Exercises</ng-md-icon>
                        </md-button>
                        <!-- //SELECT -->
                        <div layout="column" class="tagInput">
                            <md-content class="md-padding" layout="column">
                                <md-chips name='tags' ng-model="ctrl.view.selectedTags" md-max-chips='5' md-autocomplete-snap md-transform-chip="ctrl.view.transformChip($chip)" md-require-match="ctrl.view.autocompleteRequireMatch">
                                    <md-autocomplete md-selected-item="ctrl.view.selectedItem" md-search-text="ctrl.view.searchText" md-items="item in ctrl.view.querySearch(ctrl.view.searchText)" md-item-text="item.name" placeholder="Start typing to apply tags">
                                        <span md-highlight-text="ctrl.view.searchText">{{item.name}}</span>
                                    </md-autocomplete>
                                    <md-chip-template>
                                        <span>
                                            <strong>{{$chip.name}}</strong>
                                        </span>
                                    </md-chip-template>
                                </md-chips>
                                <div ng-messages="workoutForm.tags.$error" ng-if="workoutForm.$dirty">
                                    <div ng-message="md-max-chips">
                                        You reached the max. amount of tags</div>
                                </div>
                            </md-content>
                        </div>
                        <!-- //SELECT END -->
                        <md-input-container class="md-block">
                            <label for="instructions">Provide helpful Instructions:</label>
                            <textarea ng-model="ctrl.view.workout.instructions" md-maxlength="500" rows="5" id="instructions" md-select-on-focus></textarea>
                        </md-input-container>
                        <md-button class="md-primary" ng-click="ctrl.submitWorkout(view.workout)">Save</md-button>
                        <md-button ng-click="ctrl.closeRightNav()" class="md-warn">Cancel</md-button>
                    </form>
                </div>
            </md-content>
            <pre>{{view.workout | json}}</pre>
        </div>
    </md-sidenav>
    <!-- // END RIGHT SIDENAV -->
    <!-- </nav> -->
    <!-- //CARDS -->
    <md-content class="md-padding" layout="row" layout-align="space-around center" layout-wrap>
        <div flex-xs="5" flex="10" flex-gt-sm="20"></div>
        <div class="cardContent" flex-xs="90" flex="80" flex-gt-sm="60">
            <md-card ng-repeat="card in ctrl.view.workouts  | filter: ctrl.view.filteredWorkouts">
                <md-card-header>
                    <md-card-avatar>
                        <img class="md-user-avatar" ng-src="/images/youcandoit.png">
                    </md-card-avatar>
                    <md-card-header-text>
                        <span class="md-subhead"> {{card.timestamp | date: 'short'}}</span>
                        <span class="md-title">By {{card.contributor}}</span>
                        <!-- </span> -->
                    </md-card-header-text>
                </md-card-header>
                <md-divider></md-divider>
                <!-- //card tools -->
                <!-- <md-toolbar class="cardTools"> -->
                <div class="cardTools">
                    <!-- <md-button class="md-accent" ng-click="card.showImage = !card.showImage">Show Image</md-button> -->
                    <md-button class="md-accent" ng-click="card.showAddComment = !card.showAddComment">Comment</md-button>
                    <span flex></span> Votes: {{card.votes}}
                    <md-icon ng-click="voteUp(card)" class="mdi mdi-arrow-up-bold-circle md-primary"></md-icon>
                    <md-icon ng-click="voteDown(card)" class="mdi mdi-arrow-down-bold-circle  md-primary"></md-icon>
                </div>
                <!-- </md-toolbar> -->
                <md-card-title>
                    <md-icon ng-hide="card.fav" class="mdi mdi-star-outline fav" ng-click='card.fav = !card.fav'></md-icon>
                    <md-icon ng-show="card.fav" class="mdi mdi-star md-accent fav" ng-click='card.fav = !card.fav'></md-icon>
                    <md-card-title-text>
                        <span class="md-headline">{{card.title}} - <small>{{card.skill}}</small></span>
                    </md-card-title-text>
                </md-card-title>
                <div class="tag" layout="row">
                    <span class="md-subhead">&nbsp;<strong>Tags: </strong></span>
                    <span class="md-subhead" ng-repeat="tag in card.selectedTags">&nbsp;{{tag.name}}&nbsp;</span>
                </div>
                <!--<md-card-actions layout="row" layout-align="start center">
                        <md-button>Action 1</md-button>
                        <md-button>Action 2</md-button>
                    </md-card-actions> -->
                <md-card-content>
                    <!-- <div class="card">
                            <div ng-show="view.showImages" class="floatedImg">
                                <img class="cardImage" ng-src="{{card.image}}" alt="Workout Image" \>
                            </div>
                            <div class="cardInfo floatedImg">
                                <p>{{card.instructions}}</p>    
                            </div>

                        </div> -->
                    <div class="card">
                        <div>
                            <p class="foo floatedImg">
                                <img ng-show="ctrl.view.showImages" class="cardImage floatedImg" ng-src="{{card.image}}" alt="Workout Image" align="right" \> {{card.instructions}}
                            </p>
                            <!-- <span><a href="#" ng-click="addComment()">Comment</a></span>     -->
                        </div>
                    </div>
                    <div ng-show="card.showAddComment" layout="column" class="tagInput">
                        <md-content class="md-padding" layout="column">
                            <md-input-container class="md-block">
                                <label for="comments">Enter your comment here:</label>
                                <textarea ng-model="card.comment" md-maxlength="500" rows="5" id="comment" md-select-on-focus></textarea>
                            </md-input-container>
                            <md-button class="md-primary" ng-click="ctrl.submitComment(card.comment)">Save</md-button>
                            <md-button ng-click="card.showAddComment = false" class="md-warn">Cancel</md-button>
                        </md-content>
                    </div>
                    <div ng-show="ctrl.view.showComments">
                        <md-card ng-repeat="comment in card.comments">
                            <md-card-header>
                                <md-card-avatar>
                                    <md-icon class="mdi mdi-account-circle"></md-icon>
                                </md-card-avatar>
                                <md-card-header-text>
                                    <span class="md-subhead"> {{comment.timestamp | date: 'short'}}</span>
                                    <span class="md-title">{{comment.contributor}}: </span>
                                </md-card-header-text>
                            </md-card-header>
                            <span class="commentText">{{comment.text}}</span>
                        </md-card>
                    </div>
                </md-card-content>
            </md-card>
        </div>
        <!-- //end flex 50 -->
        <div flex></div>
    </md-content>
</div>
